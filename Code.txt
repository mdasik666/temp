from bs4 import BeautifulSoup

# Define buggy and correct HTML
bugfile_html = '''
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>sddsdsd</h1>
    <div>
        <h1>sdsadsa</h1>
        <p>hvhdgsvgh</p>
    </div>
</body>
</html>
'''

correctfile_html = '''
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <h1>sdsadsa</h1>
        <p>ddad</p>
        <p>hvhdgsvgh</p>
    </div>
</body>
</html>
'''

# Parse HTML files
bug_soup = BeautifulSoup(bugfile_html, 'html.parser')
correct_soup = BeautifulSoup(correctfile_html, 'html.parser')

# Convert to sets of tag names
bug_tags = {tag.name for tag in bug_soup.find_all()}
correct_tags = {tag.name for tag in correct_soup.find_all()}

# Compare missing and extra tags
added_tags = correct_tags - bug_tags
removed_tags = bug_tags - correct_tags

# Compare attributes
bug_attrs = {tag.name: tag.attrs for tag in bug_soup.find_all()}
correct_attrs = {tag.name: tag.attrs for tag in correct_soup.find_all()}

# Find differences in attributes
attribute_changes = {}
for tag in correct_attrs:
    if tag in bug_attrs:
        # Check for added attributes
        added = {k: v for k, v in correct_attrs[tag].items() if k not in bug_attrs[tag]}
        # Check for removed attributes
        removed = {k: v for k, v in bug_attrs[tag].items() if k not in correct_attrs[tag]}
        if added or removed:
            attribute_changes[tag] = {"added": added, "removed": removed}

# Output results
print("Added Tags:", added_tags)
print("Removed Tags:", removed_tags)
print("Attribute Changes:", attribute_changes)
