from bs4 import BeautifulSoup

def parse_html(file_path):
    """Parse an HTML file and return a BeautifulSoup object."""
    with open(file_path, 'r', encoding='utf-8') as file:
        content = file.read()
    return BeautifulSoup(content, 'html.parser')

def extract_structure(soup):
    """Extract the structure (tags and attributes) from the BeautifulSoup object."""
    structure = []
    for tag in soup.find_all(True):  # True means all tags
        tag_info = {
            'name': tag.name,
            'attrs': tag.attrs
        }
        structure.append(tag_info)
    return structure

def compare_structures(structure1, structure2):
    """Compare two HTML structures and return differences."""
    if len(structure1) != len(structure2):
        return f"Structure length mismatch: {len(structure1)} vs {len(structure2)}"

    differences = []
    for i, (tag1, tag2) in enumerate(zip(structure1, structure2)):
        if tag1['name'] != tag2['name']:
            differences.append(f"Tag mismatch at position {i}: {tag1['name']} vs {tag2['name']}")
        if tag1['attrs'] != tag2['attrs']:
            differences.append(f"Attribute mismatch at position {i}: {tag1['attrs']} vs {tag2['attrs']}")

    return differences if differences else "Structures are identical."

def compare_html_files(file1, file2):
    """Compare the structure of two HTML files."""
    soup1 = parse_html(file1)
    soup2 = parse_html(file2)

    structure1 = extract_structure(soup1)
    structure2 = extract_structure(soup2)

    return compare_structures(structure1, structure2)

# Example usage
file1 = 'file1.html'
file2 = 'file2.html'
result = compare_html_files(file1, file2)
print(result)
